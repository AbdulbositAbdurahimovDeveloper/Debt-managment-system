<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Transaction Tizimi Qo'llanmasi</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; }
        .rule { background: #f4f4f4; border-left: 5px solid #2c3e50; padding: 15px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #2c3e50; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .highlight { font-weight: bold; color: #e74c3c; }
    </style>
</head>
<body>
<h1>Debt Management Transaction Guide</h1>
<p>Ushbu tizimda har bir tranzaksiya mijozning balansini o'zgartiradi. Balans har doim mijozning <strong>Base Currency</strong> (asosiy valyutasi)da hisoblanadi.</p>

<div class="rule">
    <strong>Oltin qoida:</strong> <br>
    1. <code>amount</code> - bu tranzaksiyaning "qog'ozdagi" summasi.<br>
    2. <code>convertedAmount</code> - bu mijozning qarziga/balansiga qo'shiladigan yoki ayiriladigan aniq summa.
</div>

<table>
    <thead>
    <tr>
        <th>Type</th>
        <th>Kim uchun? (Client)</th>
        <th>Nima sodir bo'ladi?</th>
        <th>Kuryer ishtiroki</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><strong>SALE</strong></td>
        <td>Xaridor</td>
        <td>Mijozning qarzi <strong>ortadi</strong> (-)</td>
        <td><code>courierFee</code> bo'lsa, kuryerning balansi <strong>ortadi</strong> (+)</td>
    </tr>
    <tr>
        <td><strong>PAYMENT</strong></td>
        <td>Xaridor</td>
        <td>Mijozning qarzi <strong>kamayadi</strong> (+)</td>
        <td>Kuryer pulni olib kelsa, <code>courier</code> maydonini to'ldiring.</td>
    </tr>
    <tr>
        <td><strong>PURCHASE</strong></td>
        <td>Taminotchi</td>
        <td>Bizning qarzimiz <strong>ortadi</strong> (-)</td>
        <td>-</td>
    </tr>
    <tr>
        <td><strong>PURCHASE_PAYMENT</strong></td>
        <td>Taminotchi</td>
        <td>Bizning qarzimiz <strong>kamayadi</strong> (+)</td>
        <td>Agar kuryer orqali pul bersak, <code>courierFee</code> yoziladi.</td>
    </tr>
    <tr>
        <td><strong>RETURN</strong></td>
        <td>Xaridor</td>
        <td>Mijoz tovar qaytardi. Qarzi <strong>kamayadi</strong>.</td>
        <td>-</td>
    </tr>
    <tr>
        <td><strong>TRANSFER</strong></td>
        <td>Pul beruvchi</td>
        <td><code>targetClient</code> balansi oshadi, <code>client</code> balansi kamayadi.</td>
        <td>P2P operatsiyasi.</td>
    </tr>
    </tbody>
</table>

<h3>Kuryer mantiqi:</h3>
<ul>
    <li>Kuryer ham tizimda <strong>Client</strong> hisoblanadi.</li>
    <li>Agar tranzaksiyada <code>courier_id</code> bo'lsa, tizim avtomatik ravishda kuryerning balansiga <code>courierFee</code> summasini "ish haqi" sifatida qo'shishi kerak.</li>
    <li>Kuryer pulni yetkazib bergan bo'lsa, u biz uchun <strong>vosita va kreditor</strong> hisoblanadi.</li>
</ul>

<h3>Matematika (Logic):</h3>
<p>Agar tranzaksiya valyutasi mijoz valyutasi bilan bir xil bo'lmasa:</p>
<div class="rule">
    <code>convertedAmount = amount * exchangeRate</code> (Yoki bo'lish, kurs yo'nalishiga qarab). <br>
    Har doim <strong>convertedAmount</strong>ni hisoblab bazaga yozing!
</div>
</body>
</html>